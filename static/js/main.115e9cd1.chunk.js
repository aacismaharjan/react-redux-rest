(this["webpackJsonplearn-redux"]=this["webpackJsonplearn-redux"]||[]).push([[0],{26:function(e,t,a){e.exports=a(55)},31:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),c=a.n(r),l=(a(31),function(){return localStorage.getItem("theme-color")});function s(){return o.a.createElement("nav",{className:"navbar"},o.a.createElement("a",{href:"https://www.instagram.com/aacismaharjan",target:"_blank",rel:"noopener noreferrer"},"Aashish Maharjan"),o.a.createElement("div",{className:"right-side"},o.a.createElement("form",null,o.a.createElement("input",{type:"color",name:"color",className:"color",defaultValue:l()||"#000000",onChange:function(e){var t=e.target.value;document.documentElement.style.setProperty("--primary",t),function(e){localStorage.setItem("theme-color",e)}(t)}})),o.a.createElement("a",{className:"btn btn-sm",href:"https://github.com/aacismaharjan/react-redux-rest.git",target:"_blank",rel:"noopener noreferrer"},"Source Code")))}function d(){return o.a.createElement("div",null,o.a.createElement("h6",{style:{textAlign:"center",color:"gray",fontWeight:500,padding:"1em",margin:0}},"\xa9 2020, Made with"," ",o.a.createElement("span",{role:"img","aria-label":"Heart"},"\ud83d\udda4")," ","by Aashish Maharjan"))}var i=a(3),u=a(6),p=a.n(u),E="https://jsonplaceholder.typicode.com/posts";var m=Object(i.b)((function(e){var t=e.postReducer;return{postDelete:t.postDelete,updatePost:t.updatePost}}),(function(e,t){var a=t.post.id;return{removePost:function(){return e(function(e){return function(t){t({type:"DELETE_POST_REQUEST",payload:{id:e}}),p.a.delete("".concat(E,"/").concat(e)).then((function(){t({type:"DELETE_POST_SUCCESS",payload:{id:e}})})).catch((function(e){return t({type:"DELETE_POST_FAILURE",payload:{error:e.message}})}))}}(a))},toggleUpdateMode:function(){return e({type:"TOGGLE_UPDATE_MODE",payload:{id:a}})}}}))((function(e){var t=e.post,a=e.removePost,n=e.postDelete,r=e.updatePost,c=e.toggleUpdateMode,l=t.id,s=t.title,d=t.body,i=function(){return o.a.createElement("span",{className:"card-edit",onClick:c},r.post.id===l&&r.loading?"Editing...":"Edit")},u=function(){return o.a.createElement("span",{className:"card-delete",onClick:a},n.post.id===l&&n.loading?"Deleting...":"Delete")},p=l.toString().padStart(2,"0");return o.a.createElement("div",{className:"card"},o.a.createElement("h2",null,o.a.createElement("span",{className:"card-id"},p),o.a.createElement("span",{className:"card-title"},s),o.a.createElement(i,null),o.a.createElement(u,null)),o.a.createElement("p",null,d))}));function O(){return o.a.createElement("div",{className:"loader-wrapper"},o.a.createElement("div",{className:"loader"}))}var b=Object(i.b)((function(e){var t=e.postReducer;return{error:t.error,loading:t.loading,posts:t.posts}}))((function(e){var t=e.loading,a=e.error,n=e.posts;return t?o.a.createElement(O,null):a?o.a.createElement("div",{style:{padding:"2em",textAlign:"center"}},o.a.createElement("h1",{style:{margin:0}},":("),o.a.createElement("h5",{style:{margin:0}},"Something went wrong!")):o.a.createElement("div",{className:"post-section"},o.a.createElement("div",{className:"card-container"},n&&n.map((function(e){return o.a.createElement(m,{key:e.id,post:e})}))))})),g=a(8),P=a(1),j=a(10),S=100;var f=Object(i.b)((function(e){var t=e.postReducer;return{updatePost:t.updatePost,inEditMode:t.inEditMode,inUpdateMode:t.inUpdateMode}}),(function(e){return{fetchPosts:function(){return e((function(e){e({type:"FETCH_POSTS_REQUEST"}),p.a.get(E).then((function(t){return e({type:"FETCH_POSTS_SUCCESS",payload:{posts:t.data}})})).catch((function(t){return e({type:"FETCH_POSTS_FAILURE",payload:{error:t.message}})}))}))},addPost:function(t){return e((a=t,function(e){e({type:"POST_POST_REQUEST",payload:{post:a}}),p.a.post(E,a).then((function(t){return e({type:"POST_POST_SUCCESS",payload:{post:t.data}})})).catch((function(t){return e({type:"POST_POST_FAILURE",payload:{error:t.message}})}))}));var a},patchPost:function(t){return e((a=t,function(e){e({type:"UPDATE_POST_REQUEST",payload:{id:a.id}}),p.a.patch("".concat(E,"/").concat(a.id),a).then((function(t){e({type:"UPDATE_POST_SUCCESS",payload:{post:t.data}})})).catch((function(t){return e({type:"UPDATE_POST_FAILURE",payload:{error:t.message}})}))}));var a},toggleEditMode:function(){return e({type:"TOGGLE_EDIT_MODE"})},dispatch:e}}))((function(e){var t=e.fetchPosts,a=e.addPost,r=e.dispatch,c=e.inEditMode,l=e.inUpdateMode,s=e.updatePost,d=e.patchPost,i=e.toggleEditMode,u=Object(n.useState)({userId:0,id:0,title:"",body:""}),p=Object(j.a)(u,2),E=p[0],m=p[1];Object(n.useEffect)((function(){t()}),[t]),Object(n.useEffect)((function(){m(Object(P.a)({},s.post))}),[l,s]);var O=function(e){m(Object(P.a)(Object(P.a)({},E),{},Object(g.a)({},e.target.name,e.target.value)))};return o.a.createElement("div",{className:"card-creation-section"},o.a.createElement("div",{className:"action-buttons"},!c&&o.a.createElement("button",{onClick:i},"Add Post")),c&&o.a.createElement("div",{className:"overlay"},o.a.createElement("form",{spellCheck:"false"},o.a.createElement("h3",{style:{margin:0}},l?"Update Post: [".concat(E.id,"]"):"Add Post"),o.a.createElement("input",{type:"text",placeholder:"Enter title",name:"title",value:E.title||"",onChange:O}),o.a.createElement("textarea",{type:"text",placeholder:"Enter body",name:"body",value:E.body||"",onChange:O}),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(e){e.preventDefault(),E.title&&E.body&&(r({type:"TOGGLE_EDIT_MODE"}),l?d(E):a(Object(P.a)(Object(P.a)({},E),{},{id:++S,userId:S})),m(Object(P.a)(Object(P.a)({},E),{},{title:"",body:""})))},style:{marginRight:"1em"}},l?"Update Post":"Add Post"),c&&o.a.createElement("button",{type:"button",className:"btn-secondary",onClick:i},"Cancel")))))})),y=Object(i.b)((function(e){var t=e.postReducer;return{postDelete:t.postDelete,postPost:t.postPost,updatePost:t.updatePost}}))((function(e){var t=e.postDelete,a=e.postPost,r=e.updatePost,c=Object(n.useState)(null),l=Object(j.a)(c,2),s=l[0],d=l[1];return Object(n.useEffect)((function(){t.error?d(t.error):t.loading?d("Deleting post...."):a.error?d(a.error):a.loading?d("Adding a post..."):r.error?d(r.error):r.loading?d("Updating a post..."):d(null)}),[t,a,r]),s&&o.a.createElement("h4",{className:"alert"},s)})),T=function(){return function(){var e=l();e&&document.documentElement.style.setProperty("--primary",e)}(),o.a.createElement(o.a.Fragment,null,o.a.createElement(s,null),o.a.createElement(f,null),o.a.createElement(b,null),o.a.createElement(y,null),o.a.createElement(d,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var h=a(4),_=a(25),v={userId:null,id:null,title:"",body:""},U={posts:[],loading:!1,error:null,postDelete:{post:v,error:null,loading:null},postPost:{post:v,error:null,loading:null},updatePost:{post:v,error:null,loading:null},inEditMode:!1,inUpdateMode:!1},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_POSTS_REQUEST":return Object(P.a)(Object(P.a)({},e),{},{loading:!0});case"FETCH_POSTS_SUCCESS":return Object(P.a)(Object(P.a)({},e),{},{loading:!1,posts:t.payload.posts,error:null});case"FETCH_POSTS_FAILURE":return Object(P.a)(Object(P.a)({},e),{},{loading:!1,posts:[],error:t.payload.error});case"DELETE_POST_REQUEST":return Object(P.a)(Object(P.a)({},e),{},{postDelete:Object(P.a)(Object(P.a)({},e.postDelete),{},{loading:!0,post:{id:t.payload.id}})});case"DELETE_POST_SUCCESS":return Object(P.a)(Object(P.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.payload.id})),postDelete:Object(P.a)(Object(P.a)({},e.postDelete),{},{loading:!1,error:null,post:{}})});case"DELETE_POST_FAILURE":return Object(P.a)(Object(P.a)({},e),{},{postDelete:Object(P.a)(Object(P.a)({},e.postDelete),{},{loading:!1,error:t.payload.error,post:{}})});case"POST_POST_REQUEST":return Object(P.a)(Object(P.a)({},e),{},{postPost:Object(P.a)(Object(P.a)({},e.postPost),{},{loading:!0,post:t.payload.post})});case"POST_POST_SUCCESS":return Object(P.a)(Object(P.a)({},e),{},{posts:[Object(P.a)(Object(P.a)({},t.payload.post),{},{id:t.payload.post.userId})].concat(Object(_.a)(e.posts)),postPost:Object(P.a)(Object(P.a)({},e.postPost),{},{loading:!1,post:{},error:null})});case"POST_POST_FAILURE":return Object(P.a)(Object(P.a)({},e),{},{postPost:Object(P.a)(Object(P.a)({},e.postPost),{},{loading:!1,error:t.payload.error,post:{}})});case"UPDATE_POST_REQUEST":return Object(P.a)(Object(P.a)({},e),{},{inEditMode:!1,inUpdateMode:!1,updatePost:Object(P.a)(Object(P.a)({},e.updatePost),{},{loading:!0})});case"UPDATE_POST_SUCCESS":return Object(P.a)(Object(P.a)({},e),{},{posts:e.posts.map((function(e){return e.id===t.payload.post.id?t.payload.post:e})),inEditMode:!1,inUpdateMode:!1,updatePost:Object(P.a)(Object(P.a)({},e.updatePost),{},{error:null,loading:!1,post:{}})});case"UPDATE_POST_FAILURE":return Object(P.a)(Object(P.a)({},e),{},{inEditMode:!1,inUpdateMode:!1,updatePost:Object(P.a)(Object(P.a)({},e.updatePost),{},{loading:!1,error:t.payload.error,post:{}})});case"TOGGLE_EDIT_MODE":return Object(P.a)(Object(P.a)({},e),{},{inEditMode:!e.inEditMode});case"TOGGLE_UPDATE_MODE":return Object(P.a)(Object(P.a)({},e),{},{inEditMode:!0,inUpdateMode:!0,updatePost:Object(P.a)(Object(P.a)({},e.updatePost),{},{post:Object(P.a)({},e.posts.find((function(e){return e.id===t.payload.id})))})});default:return e}},C=Object(h.c)({postReducer:D}),M=a(24),A=h.d,R=Object(h.e)(C,A(Object(h.a)(M.a)));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(i.a,{store:R},o.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.115e9cd1.chunk.js.map