(this["webpackJsonplearn-redux"]=this["webpackJsonplearn-redux"]||[]).push([[0],{16:function(e,t,a){e.exports=a(28)},21:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(5),c=a.n(r);a(21);function s(){return o.a.createElement("nav",{className:"navbar"},o.a.createElement("a",{href:"https://www.instagram.com/aacismaharjan",target:"_blank",rel:"noopener noreferrer"},"Aashish Maharjan"),o.a.createElement("div",{className:"right-side"},o.a.createElement("a",{className:"btn btn-sm",href:"https://github.com/aacismaharjan/react-redux-rest.git",target:"_blank",rel:"noopener noreferrer"},"Source Code")))}function l(){return o.a.createElement("div",null,o.a.createElement("h6",{style:{textAlign:"center",color:"gray",fontWeight:500,padding:"1em",margin:0}},"\xa9 2020, Made with"," ",o.a.createElement("span",{role:"img","aria-label":"Heart"},"\ud83d\udda4")," ","by Aashish Maharjan"))}var d=a(2),i="https://jsonplaceholder.typicode.com/posts";var u=Object(d.b)((function(e){var t=e.fetchPostReducer;return{postDelete:t.postDelete,updatePost:t.updatePost}}),(function(e,t){var a=t.post.id;return{removePost:function(){return e(function(e){return function(t){t({type:"DELETE_POST_REQUEST",payload:{id:e}}),fetch("".concat(i,"/").concat(e),{method:"DELETE"}).then((function(){t({type:"DELETE_POST_SUCCESS",payload:{id:e}})})).catch((function(e){return t({type:"DELETE_POST_FAILURE",payload:{error:e.message}})}))}}(a))},toggleUpdateMode:function(){return e({type:"TOGGLE_UPDATE_MODE",payload:{id:a}})}}}))((function(e){var t=e.post,a=e.removePost,n=e.postDelete,r=e.updatePost,c=e.toggleUpdateMode,s=t.id,l=t.title,d=t.body,i=function(){return o.a.createElement("span",{className:"card-edit",onClick:c},r.post.id===s&&r.loading?"Editing...":"Edit")},u=function(){return o.a.createElement("span",{className:"card-delete",onClick:a},n.post.id===s&&n.loading?"Deleting...":"Delete")},p=s.toString().padStart(2,"0");return o.a.createElement("div",{className:"card"},o.a.createElement("h2",null,o.a.createElement("span",{className:"card-id"},p),o.a.createElement("span",{className:"card-title"},l),o.a.createElement(i,null),o.a.createElement(u,null)),o.a.createElement("p",null,d))}));function p(){return o.a.createElement("div",{className:"loader-wrapper"},o.a.createElement("div",{className:"loader"}))}var E=Object(d.b)((function(e){var t=e.fetchPostReducer;return{error:t.error,loading:t.loading,posts:t.posts}}))((function(e){var t=e.loading,a=e.error,n=e.posts;return t?o.a.createElement(p,null):a?o.a.createElement("div",{style:{padding:"2em",textAlign:"center"}},o.a.createElement("h1",{style:{margin:0}},":("),o.a.createElement("h5",{style:{margin:0}},"Something went wrong!")):o.a.createElement("div",{className:"post-section"},o.a.createElement("div",{className:"card-container"},n&&n.map((function(e){return o.a.createElement(u,{key:e.id,post:e})}))))})),O=a(6),b=a(1),m=a(8),P=100;var j=Object(d.b)((function(e){var t=e.fetchPostReducer;return{updatePost:t.updatePost,inEditMode:t.inEditMode,inUpdateMode:t.inUpdateMode}}),(function(e){return{fetchPosts:function(){return e((function(e){e({type:"FETCH_POSTS_REQUEST"}),fetch(i).then((function(e){return e.json()})).then((function(t){return e({type:"FETCH_POSTS_SUCCESS",payload:{posts:t}})})).catch((function(t){var a=t.message;return e({type:"FETCH_POSTS_FAILURE",payload:{error:a}})}))}))},addPost:function(t){return e((a=t,function(e){e({type:"POST_POST_REQUEST",payload:{post:a}}),fetch(i,{method:"POST",body:JSON.stringify(a),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(t){return e({type:"POST_POST_SUCCESS",payload:{post:t}})})).catch((function(t){return e({type:"POST_POST_FAILURE",payload:{error:t.message}})}))}));var a},patchPost:function(t){return e((a=t,function(e){e({type:"UPDATE_POST_REQUEST",payload:{id:a.id}}),fetch("".concat(i,"/").concat(a.id),{method:"PATCH",body:JSON.stringify(a),headers:{"Content-type":"application/json;charset=UTF-8"}}).then((function(e){return e.json()})).then((function(t){e({type:"UPDATE_POST_SUCCESS",payload:{post:t}})})).catch((function(t){return e({type:"UPDATE_POST_FAILURE",payload:{error:t.message}})}))}));var a},toggleEditMode:function(){return e({type:"TOGGLE_EDIT_MODE"})},dispatch:e}}))((function(e){var t=e.fetchPosts,a=e.addPost,r=e.dispatch,c=e.inEditMode,s=e.inUpdateMode,l=e.updatePost,d=e.patchPost,i=e.toggleEditMode,u=Object(n.useState)({userId:0,id:0,title:"",body:""}),p=Object(m.a)(u,2),E=p[0],j=p[1];Object(n.useEffect)((function(){t()}),[t]),Object(n.useEffect)((function(){j(Object(b.a)({},l.post))}),[s,l]);var f=function(e){j(Object(b.a)(Object(b.a)({},E),{},Object(O.a)({},e.target.name,e.target.value)))};return o.a.createElement("div",{className:"card-creation-section"},o.a.createElement("div",{className:"action-buttons"},!c&&o.a.createElement("button",{onClick:i},"Add Post")),c&&o.a.createElement("div",{className:"overlay"},o.a.createElement("form",{spellCheck:"false"},o.a.createElement("h3",{style:{margin:0}},s?"Update Post: [".concat(E.id,"]"):"Add Post"),o.a.createElement("input",{type:"text",placeholder:"Enter title",name:"title",value:E.title||"",onChange:f}),o.a.createElement("textarea",{type:"text",placeholder:"Enter body",name:"body",value:E.body||"",onChange:f}),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(e){e.preventDefault(),E.title&&E.body&&(r({type:"TOGGLE_EDIT_MODE"}),s?d(E):a(Object(b.a)(Object(b.a)({},E),{},{id:++P,userId:P})),j(Object(b.a)(Object(b.a)({},E),{},{title:"",body:""})))},style:{marginRight:"1em"}},s?"Update Post":"Add Post"),c&&o.a.createElement("button",{type:"button",className:"btn-secondary",onClick:i},"Cancel")))))})),f=Object(d.b)((function(e){var t=e.fetchPostReducer;return{postDelete:t.postDelete,postPost:t.postPost,updatePost:t.updatePost}}))((function(e){var t=e.postDelete,a=e.postPost,r=e.updatePost,c=Object(n.useState)(null),s=Object(m.a)(c,2),l=s[0],d=s[1];return Object(n.useEffect)((function(){t.error?d(t.error):t.loading?d("Deleting post...."):a.error?d(a.error):a.loading?d("Adding a post..."):r.error?d(r.error):r.loading?d("Updating a post..."):d(null)}),[t,a,r]),l&&o.a.createElement("h4",{className:"alert"},l)})),S=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(s,null),o.a.createElement(j,null),o.a.createElement(E,null),o.a.createElement(f,null),o.a.createElement(l,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var g=a(3),h=a(15),T={userId:null,id:null,title:"",body:""},y={posts:[],loading:!1,error:null,postDelete:{post:T,error:null,loading:null},postPost:{post:T,error:null,loading:null},updatePost:{post:T,error:null,loading:null},inEditMode:!1,inUpdateMode:!1},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_POSTS_REQUEST":return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case"FETCH_POSTS_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{loading:!1,posts:t.payload.posts,error:null});case"FETCH_POSTS_FAILURE":return Object(b.a)(Object(b.a)({},e),{},{loading:!1,posts:[],error:t.payload.error});case"DELETE_POST_REQUEST":return Object(b.a)(Object(b.a)({},e),{},{postDelete:Object(b.a)(Object(b.a)({},e.postDelete),{},{loading:!0,post:{id:t.payload.id}})});case"DELETE_POST_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.payload.id})),postDelete:Object(b.a)(Object(b.a)({},e.postDelete),{},{loading:!1,error:null,post:{}})});case"DELETE_POST_FAILURE":return Object(b.a)(Object(b.a)({},e),{},{postDelete:Object(b.a)(Object(b.a)({},e.postDelete),{},{loading:!1,error:t.payload.error,post:{}})});case"POST_POST_REQUEST":return Object(b.a)(Object(b.a)({},e),{},{postPost:Object(b.a)(Object(b.a)({},e.postPost),{},{loading:!0,post:t.payload.post})});case"POST_POST_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{posts:[Object(b.a)(Object(b.a)({},t.payload.post),{},{id:t.payload.post.userId})].concat(Object(h.a)(e.posts)),postPost:Object(b.a)(Object(b.a)({},e.postPost),{},{loading:!1,post:{},error:null})});case"POST_POST_FAILURE":return Object(b.a)(Object(b.a)({},e),{},{postPost:Object(b.a)(Object(b.a)({},e.postPost),{},{loading:!1,error:t.payload.error,post:{}})});case"UPDATE_POST_REQUEST":return Object(b.a)(Object(b.a)({},e),{},{inEditMode:!1,inUpdateMode:!1,updatePost:Object(b.a)(Object(b.a)({},e.updatePost),{},{loading:!0})});case"UPDATE_POST_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{posts:e.posts.map((function(e){return e.id===t.payload.post.id?t.payload.post:e})),inEditMode:!1,inUpdateMode:!1,updatePost:Object(b.a)(Object(b.a)({},e.updatePost),{},{error:null,loading:!1,post:{}})});case"UPDATE_POST_FAILURE":return Object(b.a)(Object(b.a)({},e),{},{inEditMode:!1,inUpdateMode:!1,updatePost:Object(b.a)(Object(b.a)({},e.updatePost),{},{loading:!1,error:t.payload.error,post:{}})});case"TOGGLE_EDIT_MODE":return Object(b.a)(Object(b.a)({},e),{},{inEditMode:!e.inEditMode});case"TOGGLE_UPDATE_MODE":return Object(b.a)(Object(b.a)({},e),{},{inEditMode:!0,inUpdateMode:!0,updatePost:Object(b.a)(Object(b.a)({},e.updatePost),{},{post:Object(b.a)({},e.posts.find((function(e){return e.id===t.payload.id})))})});default:return e}},U=Object(g.c)({fetchPostReducer:_}),v=a(14),D=Object(g.d)(Object(g.a)(v.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())(g.e)(U);c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(d.a,{store:D},o.a.createElement(S,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.5f8ace20.chunk.js.map